"""{{ model_name }} serializer."""
from rest_framework import serializers
from api.models.{{ model_name | lower }} import {{ model_name }}


class {{ model_name }}Serializer(serializers.ModelSerializer):
    """Serializer for {{ model_name }} model."""
    
    class Meta:
        model = {{ model_name }}
        fields = [
            {% for field_name in model.fields.keys() %}'{{ field_name }}',
            {% endfor %}
            {% if model.timestamps %}'created_at',
            'updated_at',{% endif %}
        ]
        read_only_fields = ['id'{% if model.timestamps %}, 'created_at', 'updated_at'{% endif %}]
        
    def validate(self, data):
        """Validate serializer data."""
        {% for field_name, field in model.fields.items() %}
        {% if field.min_length %}
        if '{{ field_name }}' in data and len(data['{{ field_name }}']) < {{ field.min_length }}:
            raise serializers.ValidationError({
                '{{ field_name }}': 'Must be at least {{ field.min_length }} characters long.'
            })
        {% endif %}
        {% if field.max_length %}
        if '{{ field_name }}' in data and len(data['{{ field_name }}']) > {{ field.max_length }}:
            raise serializers.ValidationError({
                '{{ field_name }}': 'Must be at most {{ field.max_length }} characters long.'
            })
        {% endif %}
        {% if field.min_value %}
        if '{{ field_name }}' in data and data['{{ field_name }}'] < {{ field.min_value }}:
            raise serializers.ValidationError({
                '{{ field_name }}': 'Must be at least {{ field.min_value }}.'
            })
        {% endif %}
        {% if field.max_value %}
        if '{{ field_name }}' in data and data['{{ field_name }}'] > {{ field.max_value }}:
            raise serializers.ValidationError({
                '{{ field_name }}': 'Must be at most {{ field.max_value }}.'
            })
        {% endif %}
        {% endfor %}
        return data
